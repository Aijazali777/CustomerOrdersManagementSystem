@{
    Layout = "_LayoutAdmin";
}

<div>
    @(Html.DevExtreme().FilterBuilder<Order>()
        .ID("FilterBuilder")
        .Fields(field =>
        {
            field.AddFor(f => f.OrderId);
            field.AddFor(f => f.CustomerId);
            field.AddFor(f => f.NumberOfItems);
            field.AddFor(f => f.TotalPrice);
            field.AddFor(f => f.PaymentStatus);
        })
        .OnValueChanged("onFilterChanged")
    )

    @(Html.DevExtreme().DataGrid<DevExtremeAspNetCoreAppDemo1.Models.Order>()
        .ID("OrderGrid")
        .DataSource(ds => ds.Mvc()
            .Controller("Orders")
            .LoadAction("Get")
            .InsertAction("Post")
            .UpdateAction("Put")
            .DeleteAction("Delete")
            .Key("OrderId")
        )
        .RemoteOperations(true)
        .Height(855)
        .Columns(columns =>
        {
            columns.AddFor(m => m.OrderId).AllowEditing(false);

            columns.AddFor(m => m.CustomerId);

            columns.AddFor(m => m.NumberOfItems);

            columns.AddFor(m => m.TotalPrice);

            columns.AddFor(m => m.PaymentStatus);
        })
        .Editing(e => e
            .AllowAdding(true)
            .AllowUpdating(true)
            .AllowDeleting(true)
        )
    )
</div>

<script>
    function onFilterChanged(e) {
        var dataGrid = $("#OrderGrid").dxDataGrid("instance");
        dataGrid.option("filterValue", e.component.option("value"));
    }
</script>
